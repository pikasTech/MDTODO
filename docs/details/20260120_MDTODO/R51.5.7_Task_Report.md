# R51.5.7 任务报告：标题栏功能整合与样式优化

## 任务概述

将下拉跳转、搜索、新增任务转移到标题栏里面，以标题栏同样风格的图表形式来做，另外标题栏的字号和所有的图标都小一号。

## 执行步骤

### 1. 修改 TaskList.tsx - 标题栏功能整合

在 `src/webview/components/TaskList.tsx` 中进行了以下修改：

1. **添加 `allTasks` 变量**：使用 `useMemo` 缓存所有任务列表，用于跳转下拉菜单。

2. **标题栏新增图标按钮**：
   - **跳转下拉菜单**：使用紧凑的下拉选择框，替代原来浮动筛选栏中的下拉菜单
   - **搜索按钮**：点击后显示筛选栏的搜索框（复用现有功能）
   - **添加任务按钮**：蓝色图标按钮，直接调用 `handleAddTask`

3. **更新所有图标尺寸**：将 header 中所有 SVG 图标的尺寸从 16px 改为 14px

### 2. 修改 bundle.css - 样式优化

在 `src/webview/bundle.css` 中进行了以下修改：

1. **标题字号缩小**：
   - `.header h1` font-size: 16px → 14px

2. **图标尺寸缩小**：
   - `.sync-scroll-btn svg` width/height: 16px → 14px
   - `.toolbar-icon-btn svg` width/height: 16px → 14px

3. **新增样式**：
   - `.header-dropdown`：标题栏下拉菜单容器
   - `.header-select`：标题栏下拉选择框样式（紧凑型）
   - `.add-task-header-btn`：添加任务按钮样式（蓝色背景）
   - `.toolbar-icon-btn.active`：按钮激活状态样式

## 代码变更摘要

### TaskList.tsx 关键变更

```tsx
// 新增 allTasks 变量
const allTasks = React.useMemo(() => getAllTasks(tasks), [tasks]);

// 标题栏新增元素
// 跳转下拉菜单
React.createElement('div', { className: 'header-dropdown' },
  React.createElement('select', { className: 'header-select', ... }, ...)
),

// 搜索按钮
React.createElement('button', { className: 'toolbar-icon-btn', ... },
  React.createElement('svg', { width: 14, height: 14 }, ...)
),

// 添加任务按钮
React.createElement('button', { className: 'toolbar-icon-btn add-task-header-btn', ... },
  React.createElement('svg', { width: 14, height: 14 }, ...)
)
```

### bundle.css 关键变更

```css
/* 标题字号 */
.header h1 { font-size: 14px; }

/* 图标尺寸 */
.toolbar-icon-btn svg { width: 14px; height: 14px; }

/* 下拉菜单样式 */
.header-select {
  padding: 4px 6px;
  font-size: 11px;
  min-width: 60px;
  max-width: 80px;
}
```

## 验证结果

- 项目编译成功，无 TypeScript 错误
- webpack 打包成功

## 下一步

测试验证标题栏的新功能是否正常工作。
