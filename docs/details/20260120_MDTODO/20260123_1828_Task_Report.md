# R51.5.2 任务报告：筛选栏CSS类名修复

## 任务目标

修复 R51.5.1 中遗留的问题：筛选栏在收起/展开时仍然推挤下面的任务块，应该改为遮挡上方内容。

## 问题分析

R51.5.1 的修复虽然添加了 `position: relative` 到 `.app` 容器，但仍然存在推挤问题。通过深入分析发现根本问题是：

1. **缺少CSS类定义**：React组件中使用了 `className: 'filter-bar filter-bar-expanded'`，但CSS中缺少 `filter-bar-expanded` 类的定义
2. **CSS类名不一致**：展开状态使用 `filter-bar filter-bar-expanded`，但只定义了 `filter-bar` 和 `filter-bar-collapsed`
3. **样式继承问题**：由于缺少正确的CSS类，展开状态可能回退到默认块级布局，导致推挤效果

## 修复方案

### 1. 添加缺失的CSS类定义
在 `src/webview/bundle.css` 中添加 `filter-bar-expanded` 类：

```css
/* 【实现R51.5】展开状态的完整筛选栏 */
.filter-bar-expanded {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 16px;
  padding: 10px 12px;
  background-color: #1e1e1e;
  border-bottom: 1px solid #3c3c3c;
  transition: all 0.2s ease;
}
```

### 2. 移除重复的CSS定义
移除原来的 `.filter-bar` 类，因为现在用专用的 `filter-bar-expanded` 和 `filter-bar-collapsed`。

### 3. 修正React组件中的className
在 `TaskList.tsx` 中修改展开内容的className：

```tsx
// 修改前
className: 'filter-bar filter-bar-expanded'

// 修改后  
className: 'filter-bar-expanded'
```

## 修改文件

1. **src/webview/bundle.css**：
   - 添加 `filter-bar-expanded` 类定义
   - 移除重复的 `filter-bar` 类

2. **src/webview/components/TaskList.tsx**：
   - 修正展开内容的className为 `filter-bar-expanded`

## 技术细节

### CSS层级结构
```
.filter-bar-container (position: absolute, z-index: 100)
├── .filter-bar-expanded (展开状态)
└── .filter-bar-collapsed (收起状态)
```

### 定位机制
- `.filter-bar-container`: `position: absolute` 确保脱离文档流
- `top: 45px`: 定位在header下方
- `z-index: 100`: 确保在其他内容之上
- `.app`: `position: relative` 作为定位参照

## 验证方法

1. 启动 MDTODO 插件
2. 验证筛选栏默认显示为收起状态
3. 鼠标移动到header区域，验证筛选栏展开
4. 【关键验证】观察筛选栏展开时是否仍然遮挡任务内容而不是推挤
5. 鼠标离开header和筛选栏区域，验证筛选栏收起

## 预期结果

筛选栏展开/收起时应该：
- ✅ 不推挤下方的任务列表内容
- ✅ 通过覆盖（遮挡）方式显示在内容之上  
- ✅ 具有正确的展开/收起动画效果
- ✅ 保持正确的背景色和边框样式