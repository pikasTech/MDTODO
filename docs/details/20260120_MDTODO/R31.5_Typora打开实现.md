## R31.5 任务执行记录

**任务描述**：点击链接后我希望用typora打开而不是vscode

**执行日期**：2026-01-21

### 修改内容

1. **修改文件**：`vscode-mdtodo/src/providers/webviewProvider.ts`

2. **修改内容**：
   - 添加 `spawn` 导入用于调用外部程序
   - 新增 `openWithTypora` 方法，支持跨平台打开 Typora
   - 修改 `handleOpenLink` 方法，对 `.md` 文件自动使用 Typora 打开

3. **Typora 路径查找逻辑**：
   - **Windows**：查找常见安装路径 `C:\Program Files\Typora\Typora.exe`、`C:\Program Files (x86)\Typora\Typora.exe`、`%LOCALAPPDATA%\Programs\Typora\Typora.exe`
   - **macOS**：使用 `open -a Typora` 命令
   - **Linux**：直接调用 `typora` 命令

4. **回退策略**：如果未找到 Typora 或打开失败，自动回退到 VSCode 打开

### 验证方法

1. 在 MDTODO 插件中点击任意 `.md` 文件链接
2. 观察是否使用 Typora 打开该文件
3. 如果 Typora 未安装，会显示警告并回退到 VSCode

### 注意事项

- 需要确保 Typora 已正确安装在上述路径之一
- 非 `.md` 文件（如图片、PDF 等）仍然使用 VSCode 打开
- 网页链接（http/https）仍然使用系统默认浏览器打开
