# R51.18 任务报告

## 任务描述

跳转的下一个未完成任务的按钮，应当把进行中的也当作未完成支持跳转。

## 修改内容

### 文件：`src/webview/components/TaskList.tsx`

#### 1. 未完成任务计数逻辑（R51.18修改）

**修改位置**：第321-326行

**修改前**：
```typescript
// 【实现R37.3.1】计算未完成任务的数量（在getAllTasks之后定义，避免初始化顺序问题）
const incompleteCount = React.useMemo(() => {
  const allTasks = getAllTasks(tasks);
  return allTasks.filter(t => !t.completed && !t.processing).length;
}, [tasks]);
```

**修改后**：
```typescript
// 【实现R37.3.1】【R51.18修改】计算未完成任务的数量（在getAllTasks之后定义，避免初始化顺序问题）
// 【R51.18】进行中的任务也当作未完成支持跳转
const incompleteCount = React.useMemo(() => {
  const allTasks = getAllTasks(tasks);
  return allTasks.filter(t => !t.completed).length;
}, [tasks]);
```

#### 2. 跳转下一个未完成任务函数（R51.18修改）

**修改位置**：第867-873行

**修改前**：
```typescript
// 获取所有任务（未完成 + 未进行中）
const allTasks = getAllTasks(tasks);
const incompleteTasks = allTasks.filter(t => !t.completed && !t.processing);

if (incompleteTasks.length === 0) {
  // 没有未完成的任务，提示用户
  console.log('[Webview] 没有未完成的任务');
```

**修改后**：
```typescript
// 【R51.18修改】获取所有任务（只排除已完成，进行中的也算未完成）
const allTasks = getAllTasks(tasks);
const incompleteTasks = allTasks.filter(t => !t.completed);

if (incompleteTasks.length === 0) {
  // 没有未完成的任务（包括进行中的），提示用户
  console.log('[Webview] 没有未完成的任务（包括进行中的）');
```

## 变更说明

- **变更类型**：功能修改
- **影响范围**：
  - 未完成任务计数徽章现在包含进行中的任务
  - "跳转到下一个未完成任务"按钮现在也会跳转到进行中的任务
- **兼容性**：向后兼容，只影响跳转目标的筛选逻辑
