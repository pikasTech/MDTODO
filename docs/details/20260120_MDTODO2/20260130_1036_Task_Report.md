# R53.10 任务报告

## 任务描述
webview渲染的时候忽略 [pending] 或者其他标题里面的 [xxx]

## 实现方案

修改 `src/parser/index.ts` 中的 `parseTask` 方法，将原来只移除 `[completed]` 和 `[in_progress]` 的逻辑扩展为移除所有 `[xxx]` 格式。

### 核心修改

```typescript
// 提取标题：移除所有 [xxx] 格式的标记和ID，保留其他markdown格式
// 先提取并保护链接 [...](...)，然后移除 [xxx]，最后还原链接
const links: string[] = [];
let tempContent = content.replace(/\[([^\]]*)\]\([^)]*\)/g, (match) => {
  links.push(match);
  return `__LINK_${links.length - 1}__`;
});

let title = tempContent
  .replace(/\[.*?\]/g, '')  // 移除所有 [xxx] 格式
  .replace(/(R\d+(?:\.\d+)*)/, '')  // 移除任务ID
  .replace(/^##?\s*/, '')  // 移除开头的 ##
  .trim();

// 还原链接
links.forEach((link, index) => {
  title = title.replace(`__LINK_${index}__`, link);
});
```

### 技术要点

1. **保护 markdown 链接**：先用 `__LINK_${index}__` 占位符替换链接，移除 `[xxx]` 后再还原
2. **移除所有 `[xxx]` 格式**：使用 `\[.*?\]/g` 正则匹配所有方括号内容
3. **保留状态检测逻辑**：状态检测在移除 `[xxx]` 之前进行，不受影响

## 测试验证

添加 5 个单元测试：

1. `R53.10: Should ignore [pending] in title` - 验证 `[pending]` 被移除
2. `R53.10: Should ignore any [xxx] format in title` - 验证自定义 `[xxx]` 被移除
3. `R53.10: Should ignore multiple [xxx] formats in title` - 验证多个 `[xxx]` 都被移除
4. `R53.10: Should preserve markdown links while ignoring [xxx]` - 验证链接被保留
5. `R53.10: Should handle [in_progress] and [completed] correctly` - 验证状态标记处理正确

**测试结果**：13/13 通过

## 影响范围

- `src/parser/index.ts` - 核心解析逻辑
- `test/parser.test.ts` - 新增测试用例
