## R53.5 代码块渲染闪烁问题修复

### 问题描述
代码块和行内代码的渲染在"渲染一瞬间正常，但马上变得不正常"，说明渲染逻辑本身是正确的，但有什么额外操作在渲染后修改了渲染结果。

### 根本原因
`marked-katex-extension` 在首次渲染 Markdown 后，会执行某种异步 DOM 修改操作来处理数学公式（`$...$` 和 `$$...$$`）。这个后处理操作可能导致周围的内容（包括代码块）被意外修改或重新渲染，从而导致"闪烁"效果。

### 解决方案
在 `marked-katex-extension` 的配置中添加 `output: 'html'` 选项，确保 Katex 在首次渲染时直接输出 HTML，而不是生成需要后续处理的标记。这样可以避免后续的 DOM 修改操作。

### 修改的文件

**`src/webview/components/TaskList.tsx`**

修改了 `marked-katex-extension` 的配置：

```typescript
// 修改前
marked.use(markedKatex as any, {
  throwOnError: false,
  delimiters: [
    { left: '$$', right: '$$', display: true },
    { left: '$', right: '$', display: false },
    { left: '\\(', right: '\\)', display: false },
    { left: '\\[', right: '\\]', display: true }
  ]
});

// 修改后
marked.use(markedKatex as any, {
  throwOnError: false,
  output: 'html', // 确保输出为 HTML，避免后续 DOM 修改
  delimiters: [
    { left: '$$', right: '$$', display: true },
    { left: '$', right: '$', display: false },
    { left: '\\(', right: '\\)', display: false },
    { left: '\\[', right: '\\]', display: true }
  ]
});
```

### 验证方式
在任务块或文本块中添加代码块和行内代码测试：
- 行内代码：`` `code` ``
- 跨行代码：
  ```javascript
  console.log('hello');
  ```
- 行内公式：`$E=mc^2$`
- 块级公式：`$$f(x) = \int_{-\infty}^{\infty} \hat f(\xi)\,e^{2\pi i \xi x} \,d\xi$$`

验证所有元素都能正确、稳定地渲染，不会出现闪烁。
