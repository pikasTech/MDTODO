# R51.7 任务执行报告

## 任务描述

1. 当宽度不够的时候，标题栏应该可以自动变成两行，而不是右侧的按钮无法显示
2. 跳转到下一个未完成的任务的右上角数字标记超出最上面的上限被截断了

## 问题分析

### 问题1：标题栏按钮无法换行

原 CSS 样式中：
- `.header` 使用 `display: flex` 但没有 `flex-wrap: wrap`
- `.header-actions` 设置了 `flex-wrap: nowrap` 和 `overflow: hidden`

这导致当宽度不足时，按钮被截断而不会自动换行到下一行。

### 问题2：数字徽章被截断

`.jump-next-btn-wrapper` 没有设置 `overflow: visible`，导致绝对定位的徽章在容器 overflow: hidden 时被截断。

## 解决方案

### 修改文件：`src/webview/components/TaskList.css`

#### 修改1：`.header` 样式调整

```css
/* 修改前 */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid #3c3c3c;
  flex-shrink: 0;
}

/* 修改后 */
.header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  border-bottom: 1px solid #3c3c3c;
  flex-shrink: 0;
  gap: 8px;
}
```

关键改动：
- 添加 `flex-wrap: wrap` 支持换行
- 减少 padding: `12px 16px` → `8px 12px`
- 添加 `gap: 8px` 控制间距

#### 修改2：`.header-actions` 样式调整

```css
/* 修改前 */
.header-actions {
  display: flex;
  gap: 4px;
  align-items: center;
  flex-wrap: nowrap;
  overflow: hidden;
}

/* 修改后 */
.header-actions {
  display: flex;
  gap: 4px;
  align-items: center;
  flex-wrap: wrap;
}
```

关键改动：
- 移除 `flex-wrap: nowrap` 改为 `wrap`
- 移除 `overflow: hidden`

#### 修改3：`.jump-next-btn-wrapper` 样式调整

```css
/* 修改前 */
.jump-next-btn-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 修改后 */
.jump-next-btn-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}
```

关键改动：
- 添加 `overflow: visible`

#### 修改4：`.jump-next-badge` 徽章位置微调

```css
/* 修改前 */
.jump-next-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  ...
}

/* 修改后 */
.jump-next-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  ...
}
```

关键改动：
- 微调徽章位置到 `top: -6px; right: -6px`

## 验证

执行 `npm.cmd run compile` 成功构建。

## 执行时间

2026-01-24
