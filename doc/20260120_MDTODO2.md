## 开发必读

### CSS 样式文件说明

**正确的做法**：在 React 组件中导入 CSS，由 webpack 打包内联到 bundle.js。

```typescript
// TaskList.tsx
import './TaskList.css';
```

**禁止**：
- ~~`resources/style.css`~~ - 已被废弃，不再使用
- ~~`src/webview/bundle.css`~~ - 未被导入，不会生效

所有 webview 样式添加到 `src/webview/components/TaskList.css`。

### Webpack 构建产物

- `resources/bundle.js` - webpack 从 `src/webview/index.tsx` 打包生成（包含 React 代码 + TaskList.css 样式内联）
- `out/extension.js` - webpack 从 `src/extension.ts` 打包生成的扩展代码

- 必须使用 `npm.cmd` 而不是 `npm` 来执行 npm 命令，否则 windows 下会无效。

- 编译命令 `npm.cmd run compile`

- 历史 TODO 见：[历史 TODO](./20260120_MDTODO.md)

## 总需求

开发一个 VSCODE 插件，功能是渲染TODO文件为树形任务列表，支持Claude Code集成任务执行。
详见 [总需求](./details/20260120_MDTODO/R0_总需求说明.md) 。

## R51 [Finished]

webview的左右间距过大，总的滑动条也太宽，应该用更细的现代的滑动条样式，并且将webview最外面的左右的间距设为0, 完成任务后将详细报告写入[R51](./details/20260120_MDTODO/20260123_1730_Task_Report.md)。

### R51.1 [Finished]

子任务任务块的缩进太多了，浪费了左侧的空间, 完成任务后将详细报告写入[R51.1](./details/20260120_MDTODO/20260123_1735_Task_Report.md)。

### R51.1.1 [Finished]

缩了一部分，但是子任务块的左侧还有一个竖线，R51.1的修改只是减少了子任务快和竖线的间隔，但是竖线还是缩进很多，竖线的缩进也就是竖线和任务块左侧的缩进也要减少, 完成任务后将详细报告写入[R51.1.1](./details/20260120_MDTODO/20260123_1747_Task_Report.md)。

### R51.2 [Finished]

第一次启动MDTODO且没有右侧的标签栏的时候，会创建一个很窄的右侧标签栏，我希望更宽，占vscode的50%的标签栏的总宽度，也就是创建右侧标签栏的时候对半分, 完成任务后将详细报告写入[R51.2](./details/20260120_MDTODO/20260123_1737_Task_Report.md)。

### R51.3 [Finished]

当任务块的子任务块里面有滚动条的时候，任务块应该向子任务块投影一个阴影，提示用户这个地方是被遮挡了，可以滚动上去，或者滚动下去，但是如果滚动到顶部那么顶部不应该有阴影，滚动到底部应该底部没有阴影，阴影暗示的是被遮挡了，可以滚动来查看的意思。

执行记录写入 [R51.3](./details/20260120_MDTODO/R51.3_Task_Report.md)。

### R51.3.1 [Finished]

阴影没有正常显示, 完成任务后将详细报告写入[R51.3.1](./details/20260120_MDTODO/20260123_1749_Task_Report.md)。

### R51.4 [Finished]

点击任务块的收起按钮之后，这个任务快的子任务的滑块自动滚动到最底部, 完成任务后将详细报告写入[R51.4](./details/20260120_MDTODO/R51.4_Task_Report.md)。

### R51.4.1 [Finished]

没有滚动, 完成任务后将详细报告写入[R51.4.1](./details/20260120_MDTODO/R51.4.1_Task_Report.md)。

### R51.5 [Finished]

"搜索，跳转"这个栏太占地方，应当默认向上收起，鼠标移动到标题页的时候，才下拉出现，应当注意无论向上收起还是向下下拉出现，都不应该推挤task的内容，而是遮挡上方的task的内容, 完成任务后将详细报告写入[R51.5](./details/20260120_MDTODO/R51.5_Task_Report.md)。

### R51.5.1 [Finished]

还是推挤了下面的任务块, 完成任务后将详细报告写入[R51.5.1](./details/20260120_MDTODO/R51.5.1_Task_Report.md)。

### R51.5.2 [Finished]

还是推挤，不是只在上面覆盖, 完成任务后将详细报告写入[R51.5.2](./details/20260120_MDTODO/20260123_1828_Task_Report.md)。

### R51.5.3 [Finished]

推挤问题还是没有解决，我看需要更彻底的处理方式，应当将这个栏彻底重写成一个浮动的块，这样就彻底不会导致推挤了。

执行记录写入 [R51.5.3](./details/20260120_MDTODO/20260123_2357_Task_Report.md)。

### R51.5.4 [Finished]

竟然还没有解决，干什么吃的，我要求你彻底删除这个块，在后续的步骤中再重建，这个步骤中删掉这个块（只删掉UI渲染，处理逻辑不删）, 完成任务后将详细报告写入[R51.5.4](./details/20260120_MDTODO/20260124_0007_Task_Report.md)。

### R51.5.5 [Finished]

重建这个块，用一个新的ts组件来完成这个块的重建，这个块应该是完全浮动在最外面的, 完成任务后将详细报告写入[R51.5.5](./details/20260120_MDTODO/20260124_0015_Task_Report.md)。

### R51.5.6 [Finished]

这个栏布局太多行，右侧太空，另外弹出动画的终止位置虽然正确，但是起始位置不正确，起始位置是最上方，但是应该是从标题栏下端开始弹出才对, 完成任务后将详细报告写入[R51.5.6](./details/20260120_MDTODO/20260124_0026_Task_Report.md)。

### R51.5.7 [Finished]

下拉跳转，搜索，新增任务都应该转移到标题栏里面，以标题栏同样风格的图表的形式来做，另外标题栏的字号和所有的图表都小一号, 完成任务后将详细报告写入[R51.5.7](./details/20260120_MDTODO/R51.5.7_Task_Report.md)。

### R51.5.8 [Finished]

取消浮动栏，筛选做成一个下拉菜单到标题栏, 完成任务后将详细报告写入[R51.5.8](./details/20260120_MDTODO/20260124_0107_Task_Report.md)。

### R51.5.9 [Finished]

取消标题栏左侧的标题，另外标题栏的搜索和下拉菜单样式完全没有生效, 完成任务后将详细报告写入[R51.5.9](./details/20260120_MDTODO/20260124_0114_Task_Report.md)。

### R51.6 [Finished]

跳转，搜索，筛选的样式依旧完全没有生效，这说明之前的改动都是没有意义的，应当深入分析底层原因再改, 完成任务后将详细报告写入[R51.6](./details/20260120_MDTODO2/20260124_0120_Task_Report.md)。

**根本原因**: CSS加载机制不一致 - webview从`resources/style.css`加载样式，但新样式只添加到了`src/webview/bundle.css`中，未被使用。

**解决方案**: 将缺失的样式同步到`resources/style.css`。

### R51.7 [Finished]

当宽度不够的时候，标题栏应该可以自动变成两行，而不是右侧的按钮无法显示，另外，跳转到下一个未完成的任务的右上角数字标记超出最上面的上限被截断了, 完成任务后将详细报告写入[R51.7](./details/20260120_MDTODO2/20260124_0145_Task_Report.md)。

### R51.8 [Finished]

跳转下拉菜单在完成一次跳转后，应当复位到“跳转”状态，而不是保持被定位的ID, 完成任务后将详细报告写入[R51.8](./details/20260120_MDTODO2/20260124_0147_Task_Report.md)。

### R51.9 [Finished]

跳转到子任务不应当导致子任务被展开，如果是折叠模式，应当在折叠模式下完成跳转, 真正滚动的子任务，例如R3.14，则是两个滚动操作：（1）滚动到R3的子任务附近。（2）滚动R3的子任务的内部滚动条，滚动到R3.14
完成任务后将详细报告写入[R51.9](./details/20260120_MDTODO2/20260124_0148_Task_Report.md)。

### R51.10 [Finished]

折叠和展开按钮应该合二为一，变成一个带状态的按钮，且不同的状态有颜色区分, 完成任务后将详细报告写入[R51.10](./details/20260120_MDTODO2/20260124_0149_Task_Report.md)。

### R51.10.1 [Finished]

合并按钮的效果没有生效, 完成任务后将详细报告写入[R51.10.1](./details/20260120_MDTODO2/20260124_0237_Task_Report.md)。

### R51.11 [Processing]

标题栏的添加任务按钮也要改成和其他按钮类似的风格和高度，不要蓝色, 完成任务后将详细报告写入[R51.11](./details/20260120_MDTODO2/20260124_0245_Task_Report.md)。

## R52 [Finished]

总结当前的这个项目的开发进程和成熟度，分几个开发阶段来总结, 完成任务后将详细报告写入[R52](./details/20260120_MDTODO/R52_项目开发进程与成熟度总结.md)。