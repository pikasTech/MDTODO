# R22 多行内容编辑修复

## 问题描述

当编辑的任务内容有多行时，每次编辑和完成都会导致第2行到第n行的内容被重复添加到第1行。这是因为在编辑时将本来的多行内容合并为了单行内容导致的。

## 问题根源

1. **CSS问题**：`.task-title.edit-mode` 缺少 `white-space: pre-wrap` 样式，导致 `contentEditable` 元素中的换行符 `\n` 被浏览器忽略（显示为空格）

2. **渲染问题**：`renderContent()` 函数在编辑模式下使用 `escapeHtml(task.title)` 直接渲染原始文本，但 CSS 没有保留换行格式，导致多行内容在界面上显示为一行

## 修复方案

### 1. CSS修复 (`TaskList.css`)

在 `.task-title.edit-mode` 中添加：
```css
white-space: pre-wrap;
word-break: break-all;
```

- `white-space: pre-wrap`：保留文本中的换行符和空格，正常换行
- `word-break: break-all`：防止长单词溢出，允许在任意位置换行

### 2. 代码注释补充 (`TaskList.tsx`)

在 `renderContent()` 函数中添加注释说明：
```typescript
// 编辑模式下显示原始Markdown源码，保留换行符
```

## 修改文件

1. `vscode-mdtodo/src/webview/components/TaskList.css:255-263`
   - 在 `.task-title.edit-mode` 中添加 `white-space: pre-wrap` 和 `word-break: break-all`

2. `vscode-mdtodo/src/webview/components/TaskList.tsx:837-849`
   - 在编辑模式渲染逻辑中添加注释说明

## 验证方法

1. 创建一个包含多行内容的任务，例如：
   ```
   ## R22 [Processing]

   任务描述第一行
   任务描述第二行
   任务描述第三行
   ```

2. 点击"编辑"进入编辑模式，确认多行内容正确显示，每行独立一行

3. 点击"完成"保存，确认内容正确保存，没有重复行

4. 再次编辑，确认多行内容仍然正确
