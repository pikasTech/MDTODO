# R50.3 任务执行报告

## 任务描述

延续按钮会使得折叠的任务取消折叠，这个是不应该的，应该保持折叠，和添加子任务的行为一致。

## 问题分析

在 `src/webview/components/TaskList.tsx` 中，原来的 `newTaskAdded` 消息处理逻辑会**自动展开父任务**，导致延续按钮和添加子任务都会错误地展开已折叠的父任务。

## 修复方案

添加子任务和延续任务都不应该自动展开父任务，保持用户的折叠状态。

## 代码修改

### src/webview/components/TaskList.tsx

移除 `newTaskAdded` 中展开父任务的逻辑：

```typescript
} else if (message.type === 'newTaskAdded') {
  // 【R50.3】设置待滚动的任务ID，tasks更新后会触发滚动
  setPendingScrollTaskId(message.taskId);
  // 【修复R19】标记新任务正在编辑，防止文件重载后丢失编辑状态
  setEditingTaskIds(new Set([message.taskId]));
  // 【修复R24】同时设置editModes，让新任务进入编辑模式
  setEditModes({ [message.taskId]: true });
  // console.log('[Webview] newTaskAdded: 设置新任务', message.taskId, '为编辑状态');
  // 【R50.3】不自动展开父任务，保持原折叠状态
}
```

## 验证结果

- 编译通过
- 添加子任务：保持父任务折叠状态
- 延续任务：保持父任务折叠状态

## 总结

添加子任务和延续任务现在都不会自动展开父任务，保持用户的折叠状态，符合预期。
