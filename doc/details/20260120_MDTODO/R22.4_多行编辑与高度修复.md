# R22.4 执行记录

## 问题描述

1. 编辑状态下，文本框高度需要更高
2. 进入编辑状态之后依然错误地合并了多行内容

## 问题分析

### 问题1：文本框高度问题

CSS中 `.task-title-edit` 的 `min-height` 设置为 `60px`，对于多行内容可能不够。

### 问题2：多行内容合并问题

在 `parser/index.ts` 的 `parseTask` 函数中，第264行：
```typescript
.replace(/\s+/g, ' ')  // 规范化空格
```

这行代码把所有空白字符（包括换行符 `\n`）替换成了单个空格 ` `，导致多行内容被错误合并成单行。

## 修复方案

### 修复1：增加文本框高度

将 `.task-title-edit` 的 `min-height` 从 `60px` 提高到 `100px`。

### 修复2：保留多行内容

移除 `.replace(/\s+/g, ' ')` 这行代码，让多行内容保持原始的换行结构。

## 修复步骤

### 步骤1：修改CSS增加文本框高度

文件：`vscode-mdtodo/src/webview/components/TaskList.css`

```css
/* 修改前 */
min-height: 60px;

/* 修改后 */
min-height: 100px;
```

### 步骤2：修改parser保留多行内容

文件：`vscode-mdtodo/src/parser/index.ts`

移除 `.replace(/\s+/g, ' ')` 这行代码。

## 验证方法

1. 打开一个包含多行内容的任务（如 R22.4 本身）
2. 点击"编辑"按钮
3. 验证文本框显示多行内容且高度足够
4. 修改内容后点击"完成"
5. 验证修改正确保存到md文件

## 执行时间

2026-01-21
