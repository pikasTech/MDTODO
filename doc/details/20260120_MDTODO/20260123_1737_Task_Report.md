# R51.2 任务报告

## 任务描述

第一次启动 MDTODO 且没有右侧的标签栏的时候，会创建一个很窄的右侧标签栏，我希望更宽，占 vscode 的 50% 的标签栏的总宽度，也就是创建右侧标签栏的时候对半分。

## 问题分析

问题位于 `src/providers/webviewProvider.ts` 的 `showPanel` 方法中（第 69 行），创建 webview 面板时使用了 `vscode.ViewColumn.Two`。

`ViewColumn.Two` 是 VSCode 的固定列常量，使用它时：
- 如果已经有一个编辑器在 `ViewColumn.One`，`ViewColumn.Two` 会分配一个较窄的空间
- VSCode 的列系统会自动压缩后续列的宽度

## 解决方案

使用 `ViewColumn.Beside` 代替 `ViewColumn.Two`：
- `ViewColumn.Beside` 会在当前编辑器**旁边**创建一个新列
- VSCode 会自动将屏幕空间对半分给两个列
- 如果当前没有活动的编辑器（例如首次启动时），则回退到 `ViewColumn.Two`

## 代码修改

文件：`src/providers/webviewProvider.ts`

修改前：
```typescript
this.panel = vscode.window.createWebviewPanel(
  'mdtodoPanel',
  panelTitle,
  vscode.ViewColumn.Two,  // 右侧第二列
```

修改后：
```typescript
// 【R51.2】使用 Beside 代替 Two，以实现对半分宽度
// 当使用 Beside 时，VSCode 会自动分配相等的空间给两个列
const activeEditor = vscode.window.activeTextEditor;
const viewColumn = activeEditor ? vscode.ViewColumn.Beside : vscode.ViewColumn.Two;

// 在右侧新列打开，使用文件名作为标题
this.panel = vscode.window.createWebviewPanel(
  'mdtodoPanel',
  panelTitle,
  viewColumn,
```

## 验证方法

1. 关闭 VSCode 的所有编辑器窗口
2. 启动 MDTODO 插件（按 F5 调试或使用 `mdtodo.openView` 命令）
3. 观察 webview 面板的宽度，应该与左侧编辑器（或空白区域）对半分

## 注意事项

- `ViewColumn.Beside` 需要有活动编辑器才能正常工作
- 如果当前没有打开任何编辑器（如首次启动且没有打开 md 文件），会回退到 `ViewColumn.Two`
- 这种修改不会影响已有面板的显示逻辑
