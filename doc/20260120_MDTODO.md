## 总需求

开发一个 VSCODE 插件，功能是渲染TODO文件为树形任务列表，支持Claude Code集成任务执行。
详见 [总需求](./details/20260120_MDTODO/R0_总需求说明.md) 。

重要说明：

必须使用 `npm.cmd` 而不是 `npm` 来执行 npm 命令，否则 windows 下会无效。

## R1 [Finished]

深入调研 VSCODE 插件开发相关知识，包括联网调研，形成调研报告。
报告写入 [R1](./details/20260120_MDTODO/R1_VSCODE_PLUGIN_RESEARCH.md) 。

## R2 [Finished]

根据R1调研结果，规划VSCODE插件的开发阶段和模块分解。
规划文档写入 [R2](./details/20260120_MDTODO/R2_开发规划.md) 。

## R3 [Finished]

根据R2的规划，编写每个阶段的详细执行计划。
执行计划写入 [R3](./details/20260120_MDTODO/R3_阶段计划.md) 。

### R3.1 [Finished]

第1阶段详细执行计划：项目初始化与基础框架。
计划写入 [R3.1](./details/20260120_MDTODO/R3.1_阶段一计划.md) 。

### R3.2 [Finished]

第2阶段详细执行计划：核心TODO列表功能。
计划写入 [R3.2](./details/20260120_MDTODO/R3.2_阶段二计划.md) 。

### R3.3 [Finished]

第3阶段详细执行计划：文件读写与状态同步。
计划写入 [R3.3](./details/20260120_MDTODO/R3.3_阶段三计划.md) 。

### R3.4 [Finished]

第4阶段详细执行计划：Claude Code集成与任务执行。
计划写入 [R3.4](./details/20260120_MDTODO/R3.4_阶段四计划.md) 。

### R3.5 [Finished]

第5阶段详细执行计划：测试优化与功能完善。
计划写入 [R3.5](./details/20260120_MDTODO/R3.5_阶段五计划.md) 。

## R4.1 [Finished]
执行R3.1的第1阶段计划：项目初始化与基础框架。
执行日志写入 [R4.1](./details/20260120_MDTODO/R4.1_阶段一执行.md) 。

### R4.1.1 [Finished]

阶段一功能测试：插件加载与命令注册测试。
测试结果写入 [R4.1.1](./details/20260120_MDTODO/R4.1.1_阶段一测试.md) 。

### R4.1.2 [Finished]

阶段一问题修复：如R4.1.1测试发现问题，在此修复。
修复记录写入 [R4.1.2](./details/20260120_MDTODO/R4.1.2_阶段一修复.md) 。

## R4.2 [Finished]

执行R3.2的第2阶段计划：核心TODO列表功能。
执行日志写入 [R4.2](./details/20260120_MDTODO/R4.2_阶段二执行.md) 。

### R4.2.1 [Finished]

阶段二功能测试：TreeView显示与解析功能测试。
测试结果写入 [R4.2.1](./details/20260120_MDTODO/R4.2.1_阶段二测试.md) 。

### R4.2.2 [Finished]

阶段二问题修复：如R4.2.1测试发现问题，在此修复。
修复记录写入 [R4.2.2](./details/20260120_MDTODO/R4.2.2_阶段二修复.md) 。

## R4.3 [Finished]
执行R3.3的第3阶段计划：文件读写与状态同步。
执行日志写入 [R4.3](./details/20260120_MDTODO/R4.3_阶段三执行.md) 。

### R4.3.1 [Finished]

阶段三功能测试：文件读写与状态同步测试。
测试结果写入 [R4.3.1](./details/20260120_MDTODO/R4.3.1_阶段三测试.md) 。

### R4.3.2 [Finished]

阶段三问题修复：如R4.3.1测试发现问题，在此修复。
修复记录写入 [R4.3.2](./details/20260120_MDTODO/R4.3.2_阶段三修复.md) 。

## R4.4 [Finished]

执行R3.4的第4阶段计划：Claude Code集成与任务执行。
执行日志写入 [R4.4](./details/20260120_MDTODO/R4.4_阶段四执行.md) 。

### R4.4.1 [Finished]

阶段四功能测试：Claude Code调用与任务执行测试。
测试结果写入 [R4.4.1](./details/20260120_MDTODO/R4.4.1_阶段四测试.md) 。

### R4.4.2 [Finished]

阶段四问题修复：如R4.4.1测试发现问题，在此修复。 修复记录写入 [R4.4.2](./details/20260120_MDTODO/R4.4.2_阶段四修复.md) 。

## R4.5 [Finished]
执行R3.5的第5阶段计划：测试优化与功能完善。
执行日志写入 [R4.5](./details/20260120_MDTODO/R4.5_阶段五执行.md) 。

### R4.5.1 [Finished]
阶段五功能测试：完整功能集成测试与用户体验测试。
测试结果写入 [R4.5.1](./details/20260120_MDTODO/R4.5.1_阶段五测试.md) 。

### R4.5.2 [Finished]
阶段五问题修复：如R4.5.1测试发现问题，在此修复。
修复记录写入 [R4.5.2](./details/20260120_MDTODO/R4.5.2_阶段五修复.md) 。

## R5 [Finished]

将TreeView侧边栏改为独立Webview面板视图。修改记录写入 [R5](./details/20260120_MDTODO/R5_独立视图实现.md) 。

### R5.1 [Finished]

侧边栏默认占编辑区的一半的宽度 +子任务、删除、claude执行等按钮应当放到任务内容文本区的下面然后右对齐，而不是左右并排，左右并排会把文本区挤压的非常窄。 执行记录写入 [R5.1](./details/20260120_MDTODO/R5.1_布局优化执行.md) 。
+子任务、删除、claude执行等按钮应当放到任务内容文本区的下面然后右对齐，而不是左右并排，左右并排会把文本区挤压的非常窄。

执行记录写入 [R5.1](./details/20260120_MDTODO/R5.1_布局优化执行.md) 。

## R6 [Finished]

现在的 webview 缺少增加TODO，删除TODO，增加子TODO 等方法。2. 默认应当全部展开 TODO，并且增加一个全部展开和全部收起的按钮。
执行记录写入 [R6](./details/20260120_MDTODO/R6_功能增强执行.md) 。

## R7 [Finished]

点击 Cluade 执行的时候，claude 这个命令行窗口的工作路径应该是当前 vscode 窗口的路径，传入的 TODO 路径应当是一个相对路径。
执行记录写入 [R7](./details/20260120_MDTODO/R7_工作路径与相对路径执行.md) 。

## R8 [Finished]

"添加任务" 的按钮应当随时可见而不是仅仅处于 webview 的最上边，可以考虑使其浮动，这样不管滚动到哪里都可以添加。
点击"+子任务" 或者 "添加任务" 后，自动滚动到对应的子任务或者任务，聚焦并使其处于编辑模式。

执行记录写入 [R8](./details/20260120_MDTODO/R8_功能增强执行.md) 。

### R8.1 [Finished]
添加任务或者子任务，进入编辑模式后，编辑栏里面应当是空的，并且应当直接让键盘光标进入到里面。这样用户直接就能打字，而不是多点击一次。

执行记录写入 [R8.1](./details/20260120_MDTODO/R8.1_编辑体验优化执行.md) 。

## R9 [Finished]

删除功能还是有误删的问题，应当将 doc\review\20260120_MDTODO.md 作为例子，复制一份去做单元测试，测试各种边界情况下的删除功能，确保真正鲁棒地解析和编辑.md文件，充分测试边界情况。

执行记录写入 [R9](./details/20260120_MDTODO/R9_删除功能边界测试执行.md) 。

## R10 [Finished]

Claude 执行按钮应该要加防抖，设置为 0.5s 的冷却，避免抖动导致多次执行。
执行记录写入 [R10](./details/20260120_MDTODO/R10_防抖执行.md) 。

## R11 [Finished]

应当有筛选的功能
执行记录写入 [R11](./details/20260120_MDTODO/R11_筛选功能实现.md) 。

### R11.1 [Finished]

筛选功能应该浮动到窗口上方，这样滚动的时候也找到，而不是必须滚到最上面才能用
执行记录写入 [R11.1](./details/20260120_MDTODO/R11.1_筛选栏浮动实现.md) 。

## R12 [Finished]

编辑功能要改进：
双击任务要能进入编辑模式。
现在的编辑模式点完成后没有正确同步到 md 文件中。
在编辑模式下回车应当完成编辑。

执行记录写入 [R12](./details/20260120_MDTODO/R12_编辑功能改进执行.md) 。

### R12.1 [Finished]

1.回车后要退出编辑模式，和点击"完成"的效果一样才行。
2.编辑的对象是任务内容，任务内容是在 RXX 换行之后的，而不是和 RXX 同行的。

执行记录写入 [R12.1](./details/20260120_MDTODO/R12.1_编辑体验优化执行.md) 。

### R12.2 [Finished]

1.RXX 换行要加2个\n\n，这是 markdown 语法规定的。2.回车后确实编辑了md文件，但是webui仍然没有切换到非编辑模式，webui也要同步切换。

执行记录写入 [R12.2](./details/20260120_MDTODO/R12.2_换行符与编辑模式同步修复.md) 。

### R12.3 [Finished]

1.要求的是在完成编辑后，在RXX行和内容行之间有\n\n，现在没有实现这个目标，应该是加错了位置。2.回车后webui依然没有切换到非编辑模式。

执行记录写入 [R12.3](./details/20260120_MDTODO/R12.3_换行符与编辑模式切换修复.md) 。

### R12.3.1 [Finished]

回车后依然， 依然，依然没有切换到webview的非编辑模式！！！ 执行记录写入 [R12.3.1](./details/20260120_MDTODO/R12.3.1_编辑模式切换修复.md) 。

### R12.4 [Finished]

现在添加的\n过多了，多了一个


执行记录写入 [R12.4](./details/20260120_MDTODO/R12.4_换行符数量修复.md) 。4

## R13 [Finished]

不包含 RXX 的标题 + 内容块不要渲染为任务，应该渲染为普通文本块。

执行记录写入 [R13](./details/20260120_MDTODO/R13_普通文本块渲染执行.md) 。

### R13.1 [Finished]

渲染普通文本块的范围检测错误，以本文档为例，普通文本块是从总需求开始，到R1之前结束，并且这部分内容渲染为一个普通文本块而不是多个。

执行记录写入 [R13.1](./details/20260120_MDTODO/R13.1_普通文本块范围检测修复.md) 。

### R13.2 [Finished]

仍然没有正确识别，现在1.普通代码块渲染到了整个文件尾部。2.每一行都渲染为了单独的文本块。

执行记录写入 [R13.2](./details/20260120_MDTODO/R13.2_普通文本块渲染修复.md) 。

### R13.3 [Finished]

还是很糟糕，一点都没有改善，你应该为普通代码块识别功能添加单元测试，确保复现问题并在单元测试修复，就复制当前这个文档来测试。

执行记录写入 [R13.3](./details/20260120_MDTODO/R13.3_普通文本块识别单元测试修复.md) 。

### R13.4 [Finished]

普通文本块也要使用markdown渲染模块来渲染

执行记录写入 [R13.4](./details/20260120_MDTODO/R13.4_普通文本块Markdown渲染执行.md) 。

### R13.5 [Finished]

普通文本块也应当能双击修改，普通文本块应该复用任务内容块的渲染和修改逻辑，抽离出公共模块, 完成任务后将详细报告写入[R13.5](./details/20260120_MDTODO/R13.5_Task_Report.md)。

## R14 [Finished]

非编辑模式下应当用第三方包来渲染任务内部的md内容块，编辑模式下直接显示源码。
执行记录写入 [R14](./details/20260120_MDTODO/R14_MD渲染实现.md) 。

## R15 [Finished]

以本文档为例，点击添加任务后，R15 竟然添加到了 R14 之前而不是之后。

执行记录写入 [R15](./details/20260120_MDTODO/R15_添加任务插入位置修复.md) 。

## R16 [Finished]
+添加任务的按钮放到状态和筛选栏里面，不要单独浮动。

## R17 [Finished]

点击了 Claude 执行之后，在 RXX 后面加上  并配合适当的 WebUI 渲染来区分进行中的任务。筛选栏也应该区分进行中和未开始。

执行记录写入 [R17](./details/20260120_MDTODO/R17_Processing状态实现.md) 。

### R17.1 [Finished]

1.错误匹配到了任务内容部分的而非与RXX同行的，只有和RXX同行的才是有效的。2.点击Claude执行后没有正确给 RXX 添加

执行记录写入 [R17.1](./details/20260120_MDTODO/R17.1_Processing状态检测与标记修复.md) 。

### R17.2 [Finished]

还是匹配错了，R17的标题行和R17.1的标题行都不包含[Processsing]

执行记录写入 [R17.2](./details/20260120_MDTODO/R17.2_Processing状态匹配修复.md) 。

## R18 [Finished]

为插件添加.gitignore

### R18.1 [Finished]

识别哪些是webpack打包之后的产物，例如bundle，也要加入.gitignore, 完成任务后将详细报告写入[R18.1](./details/20260120_MDTODO/20260123_2355_Task_Report.md)。

## R19 [Finished]

有时候莫名其妙进入编辑模式，而且还会切到其他的任务里面编辑，这个行为应该是新建任务的时候才触发才对，这个行为有时候误触发，是否是因为其他的操作误触发了这个行为

执行记录写入 [R19](./details/20260120_MDTODO/R19_编辑模式误触发修复.md) 。

## R20 [Finished]

1.点击添加任务后，任务的内容应当是全空的，而不是有RXX。2.点击添加任务后，有一瞬间进入编辑模式，然后又变成了非编辑模式。3.应当总是确保只有0个或者1个任务处于编辑模式，而不是多个，如果编辑另一个，则将其他的切换为非编辑模式。4.处于编辑模式的任务应该不被外部编辑.md刷新，保持独立，避免正在编辑的时候被外部编辑.md刷新导致丢失编辑。执行记录写入 [R20](./details/20260120_MDTODO/R20_编辑模式修复执行.md) 。

## R21 [Finished]

所有按钮都要有类似Claude执行按钮的防抖，避免误触。

执行记录写入 [R21](./details/20260120_MDTODO/R21_按钮防抖实现.md) 。

## R22 [Finished]

当要编辑的任务内容里面有多行内容时，每次编辑和完成都会导致行2~行n的内容被重复添加到行1，这应该是因为在编辑时将本来的多行内容合并为了单行内容导致的，应该不要将多行内容合并为单行，是多行就编辑多行 执行记录写入 [R22](./details/20260120_MDTODO/R22_多行内容编辑修复.md) 。

### R22.1 [Finished]

R22的问题依然存在，而且R21的防误触也没有在编辑按钮和完成按钮上生效 执行记录写入 执行记录写入 [R22.1](./details/20260120_MDTODO/R22.1_多行编辑与防抖修复.md) 。

执行记录写入 [R22.1](./details/20260120_MDTODO/R22.1_多行编辑与防抖修复.md) 。

### R22.2 [Finished]

多行编辑问题仍然存在

执行记录写入 [R22.2](./details/20260120_MDTODO/R22.2_多行编辑修复.md) 。

### R22.3 [Finished]

多行编辑问题已经处理了很久，我希望不要再卡在这里了，在编辑模式下也应该使用成熟的支持多行的文本编辑库而不是自己做一个，另外，在进入编辑模式的时候，也应该从原始的md中再提取出待编辑的文本，而不是从非编辑模式渲染过的文本中转换为待编辑的文本，避免渲染过程影响编辑 执行记录写入 R22.3 。

执行记录写入 [R22.3](./details/20260120_MDTODO/R22.3_多行编辑修复执行.md) 。

### R22.4 [Finished]

1.编辑状态下，文本框高度高一些。2.进入编辑状态之后依然错误地合并了多行，也就是说你获取原始的数据到时候应该就出问题了。

### R22.5 [Finished]

进入编辑状态的时候看到显示的内容没问题了，但是多行编辑回写进markdown的时候又存在重复问题，我推测是将多行替换到原来markdown的单行，这样原来的单行变成新的多行，而原来的除了第一行的其他行保留，因此重复了，这是因为没有正确定位回写的时候的替换行号范围，这个问题你需要编写单元测试复现然后再修复

执行记录写入 [R22.5](./details/20260120_MDTODO/R22.5_多行内容编辑修复执行.md) 。

### R22.6 [Finished]

现在多行编辑回写问题初步解决了。存在的新问题：会误删子任务，例如R12 编辑后， R12.1 等就被删除了，这说明识别替换范围存在问题。另外在替换后，最后一行的回车没有了，这个问题也要处理。这两个问题都需要用单元测试复现后修复。

执行记录写入 [R22.6](./details/20260120_MDTODO/R22.6_多行编辑修复执行.md) 。

### R22.7 [Finished]

1.每次编辑后，最后一行应该有两个\n而不是一个 2.取消编辑和完成来两个按钮，现在已经可以用双击和离开焦点来实现编辑了，两个按钮没用了。3.删除按钮改成垃圾桶图表。4.Claude执行改成运行图标

执行记录写入 [R22.7](./details/20260120_MDTODO/R22.7_按钮与图标优化执行.md) 。

### R22.8 [Finished]

22.7的\n问题仍然存在：
1. 当编辑最后一个task时，末尾会有2个\n，是正常的
2. 当编辑除了最后一个task时，末尾只有一个\n，但是文件尾会多一个\n
3. 每次编辑非最后一个task，文件尾都会多一个\n

4. 期望效果：R1的任务内容的最后一行和R2标题行之间有两个\n\n，不是要编辑文件尾的\n。
执行记录写入 [R22.8](./details/20260120_MDTODO/R22.8_换行符修复执行.md) 。

### R22.9 [Finished]

R22.8的修复是有效的，编辑后除了R22.8的要求外，RXX 标题行和内容行的第一行之间也应当是2个\n，现在只有一个，也要用相同的流程修复，先单元测试复现再修复

执行记录写入 [R22.9](./details/20260120_MDTODO/R22.9_标题与内容换行符修复.md) 。

### R22.10 [Finished]

带有多行的任务，在编辑后又出现重复的问题了，说明还是替换的范围不对，继续单元测试复现+修复。

修复内容：
1. 修改 `handleSaveTitle` 函数，使用任务ID前缀来判断同级/子任务关系
2. 编辑主任务时，保留子任务内容在原位（通过识别以 R1. 开头的子任务）
3. 添加了完整的单元测试覆盖多行内容编辑场景

### R22.11 [Finished]

R22.8的期望效果又失效了，现在任务内容块和下一个任务的标题之间的两个\n又变成了1个\n，似乎是意外的回滚造成的。

执行记录写入 [R22.11](./details/20260120_MDTODO/R22.11_任务内容与下一标题换行符修复.md) 。

## R23 [Finished]

如同（1. 2. ）这样的编号在编辑时会消失，这意味着编辑时没有真正获得最原始的文本，这个问题要通过单元测试复现和修复。

执行记录写入 [R23](./details/20260120_MDTODO/R23_编号列表编辑修复.md) 。

### R23.1 [Finished]

R23 修复的问题又重现了，似乎是意外回滚造成的。

执行记录写入 [R23.1](./details/20260120_MDTODO/R23.1_编号列表编辑修复执行.md) 。

### R23.2 [Finished]

我希望编号和其他的markdon语法都能正常渲染，在非编辑模式下不需要过滤。

执行记录写入 [R23.2](./details/20260120_MDTODO/R23.2_编号列表渲染修复.md) 。

## R24 [Finished]

点击添加任务后，编辑框内还是存在编号文本，应该确保编辑框内真的全是空的。

## R25 [Finished]

左下角的状态栏还是"未选择文件"，即使已经选择好了文件。
执行记录写入 [R25](./details/20260120_MDTODO/R25_状态栏修复.md) 。


## R26 [Finished]

用于标记是否完成的选择框在webview是无效的，点击后出现了通知但是没有实际修改这个任务是否完成。执行记录写入 [R26](./details/20260120_MDTODO/R26_完成状态标记修复.md) 。

### R26.1 [Finished]

这个问题按照R26的修改已经解决了，但是现在又不能用了

执行记录写入 [R26.1](./details/20260120_MDTODO/R26.1_完成状态标记修复执行.md) 。


### R26.2 [Finished]

在Processing状态下也允许标记为完成

执行记录写入 [R26.2](./details/20260120_MDTODO/R26.2_Processing状态完成标记实现.md) 。


## R27 [Finished]

编辑框的高度要根据文本框内的文字的行数调整，行数越多的文本框要越高

执行记录写入 [R27](./details/20260120_MDTODO/R27_动态高度编辑框实现.md) 。

### R27.1 [Finished]

再高一些，按照比之前整体高50%来调整

## R28 [Finished]

增加一个跳转的下拉菜单

### R28.1 [Finished]

跳转的下拉菜单的排序应该是按照在原文档中的先后顺序派，而不是首字母顺序徐排。

### R28.2 [Finished]

跳转的位置不对，不应该是居中，这样会使得很长的任务看不到开始的位置，我希望是顶对齐，例如跳转到R4，那么R4的开始位置就在顶部。

执行记录写入 [R28.2](./details/20260120_MDTODO/R28.2_跳转位置顶对齐修复.md) 。

## R29 [Finished]
如果 VSCODE 左侧的 TagTree 打开了 md 的源文件，右侧打开了 MDTODO 插件，那么应该实现双向的滚动同步。执行记录写入 [R29](./details/20260120_MDTODO/R29_双向滚动同步实现.md)

### R29.1 [Finished]

现在md源文件到MDTODO webview 的同步实现了，但是MDTODO 到 md 源文件的同步没有实现，应该是聚焦到哪个上面，哪个就是主动的，另一个是被动跟随的。

执行记录写入 [R29.1](./details/20260120_MDTODO/R29.1_双向滚动同步焦点跟踪实现.md) 。


### R29.2 [Finished]

右上角增加一个图表按钮控制是否开启双向滚动，默认不开启。

执行记录写入 [R29.2](./details/20260120_MDTODO/R29.2_双向滚动开关实现.md) 。

### R29.3 [Finished]

在R29.2的不开启状态下还是触发了同步

执行记录写入 [R29.3](./details/20260120_MDTODO/R29.3_双向滚动开关失效修复.md) 。


## R30 [Finished]

现在我希望将插件安装到vscode实际的工作状态下，以便于在真实的工作中使用，应当怎么做？如果要上传到插件市场应该怎么做？

执行记录写入 [R30](./details/20260120_MDTODO/R30_VSCode插件安装与发布指南.md) 。

### R30.1 [Finished]

实际实现本地打包，并创建一个打包脚本pack.bat，测试好这个脚本。

执行记录写入 [R30.1](./details/20260120_MDTODO/R30.1_本地打包实现.md) 。

### R30.2 [Finished]

还要再创建一个install.bat脚本，一件将这个插件安装到本地常规的vscode上（实际工作模式非调试模式）。完成任务后将详细报告写入[R30.2](./details/20260120_MDTODO/R30.2_任务描述.md)。

### R30.3 [Finished]

实际验证和修复R30.2的脚本，完成任务后将详细报告写入[R30.3](./details/20260120_MDTODO/R30.3_任务描述.md)。

### R30.4 [Finished]

INSTALL.bat也要包含打包过程，包含完整的打包，安装，更新全过程，无论任何时候install.bat都应该重新打包并安装更新最新的插件, 完成任务后将详细报告写入[R30.4](./details/20260120_MDTODO/R30.4_任务描述.md)。

## R31 [Finished]

点击任务里面的文档链接后没有真实跳转到文档，我希望点击链接后能打开文档

执行记录写入 [R31](./details/20260120_MDTODO/R31_链接点击打开文档实现.md) 。

### R31.1 [Finished]

没有真正实现，点击链接后仍然显示的通知是"选中任务"而不是跳转了

### R31.2 [Finished]

R31.1的任务依然没有真正实现，多查一下网上的资源，了解到底vscode怎么实现链接跳转文档。

执行记录写入 [R31.2](./details/20260120_MDTODO/R31.2_链接点击打开文档修复.md) 。

### R31.3 [Finished]

31.2修改后，非编辑模式看到链接变成 undefined，我只是要求实现跳转，没让你改渲染！渲染本来就是好的！

执行记录写入 [R31.3](./details/20260120_MDTODO/R31.3_链接渲染修复.md) 。

### R31.4 [Finished]

连接里面必须要(./xxx/)开头才能打开，(xxx/)开头就打不开，这两个应该是等价的才对

执行记录写入 [R31.4](./details/20260120_MDTODO/R31.4_相对路径修复.md) 。

### R31.5 [Finished]

点击链接后我希望用typora打开而不是vscode

执行记录写入 [R31.5](./details/20260120_MDTODO/R31.5_Typora打开实现.md) 。

## R32 [Finished]

总结上面的开发过程的经验教训，为后续的类似项目开发提供借鉴

执行记录写入 [R32](./details/20260120_MDTODO/R32_开发经验教训总结.md) 。

### R32.1 [Finished]

开发经验要总结重点难点，要多看details报告，不要浅尝辄止，开发经验里面少写代码，多写可以复用的经验，开发模式，重点难点等

执行记录写入 [R32.1](./details/20260120_MDTODO/R32.1_开发经验改进执行.md) 。

## R33 [Finished]

评估当前这个项目的实用价值，用一天半的时间完成开发是否是值得投入的工作量？

执行记录写入 [R33](./details/20260120_MDTODO/R33_实用价值评估.md) 。

### R33.1 [Finished]

在评估的时候，也要评估除了论文撰写外的其他软件开发、策划管理、科研程序设计等方面的价值，不管是论文价值。

执行记录写入 [R33.1](./details/20260120_MDTODO/R33.1_多领域实用价值扩展评估.md) 。

## R34 [Finished]

webview左上角的"MDTODO 任务管理"替换成当前的文件名，例如20260120_MDTODO（不带.md后缀)

执行记录写入 [R34](./details/20260120_MDTODO/R34_文件名标题实现.md) 。

### R34.1 [Finished]

1. Tag名称也改为当前的文件名。
2. 在md源文件中点击 MDTODO 按钮时，如果当前的md文件未在MDTODO webview 中加载，则创建一个新的webview，而不是将已有的其他MD的webview页面跳转为新的md的webview页面，这样多个webview页面有助于同时管理多个TODO。

执行记录写入 [R34.1](./details/20260120_MDTODO/R34.1_Tag名称与多Webview实现.md) 。

### R34.2 [Finished]

R34.1的任务1又失效了，解决这个问题。完成任务后将详细报告写入[R34.2](./details/20260120_MDTODO/R34.2_Tag名称修复.md)。

## R35 [Finished]

上方状态栏中，将已完成换成隐藏已完成的选项

执行记录写入 [R35](./details/20260120_MDTODO/R35_隐藏已完成选项实现.md) 。

## R36 [Finished]

在新建任务后，自动在任务文本中添加"完成任务后将详细报告写入[Rxx]({path_to_rxx})"。然后将光标移动到输入框的最开始。这样用户就不需要自己编写报告写入的文件名和路径了。

执行记录写入 [R36](./details/20260120_MDTODO/R36_报告模板与光标位置实现.md) 。

### R36.1 [Finished]

新建任务和新建子任务的添加逻辑不一致，应该改成公共函数，以新建任务的添加逻辑为准，要带逗号，完成任务后将详细报告写入[R36.1](./details/20260120_MDTODO/R36.1_任务描述.md)。

### R36.2 [Finished]

生成的路径名改为：[Rxx](./details/{MDTODO}/Rxx_Task_Report.md})，也就是说修改指定报告的文件名, 完成任务后将详细报告写入[R36.2](./details/20260120_MDTODO/R36.2_Task_Report.md)。

## R37 [Finished]

增加一个打开原MDTODO的原md文件的功能。 完成任务后将详细报告写入[R37](./details/20260120_MDTODO/R37_任务描述.md)。

### R37.1 [Finished]

这个打开md原文用vscode打开（注意其他的还是用typero不变）, 完成任务后将详细报告写入[R37.1](./details/20260120_MDTODO/R37.1_任务描述.md)。

### R37.2 [Finished]

全部展开、全部收起、刷新、打开文件、打开原文、预览这一排按钮太大了，改成图案或者调小一点，另外删掉预览按钮, 完成任务后将详细报告写入[R37.2](./details/20260120_MDTODO/R37.2_按钮图标化与预览删除执行.md)。

### R37.3 [Finished]

再增加快速到最顶部和快速到最底部的按钮，再增加一个跳转到下一个未完成的按钮（如果跳到末尾则从头开始循环）, 完成任务后将详细报告写入[R37.3](./details/20260120_MDTODO/R37.3_快速导航按钮实现.md)。

### R37.3.1 [Finished]

跳转到下一个的按钮上面应该显示一个数字，类似未读消息的数字，提示还有多少个未完成的任务, 完成任务后将详细报告写入[R37.3.1](./details/20260120_MDTODO/R37.3.1_执行.md)。

## R38 [Finished]

现在的按钮的防抖间隔过大导致感觉卡顿，防抖做到100m就可以了, 完成任务后将详细报告写入[R38](./details/20260120_MDTODO/R38_防抖间隔优化执行.md)。

### R38.1 [Finished]

防抖状态应该是每个按钮独立的，现在我按一个按钮，其他按钮也在防抖, 完成任务后将详细报告写入[R38.1](./details/20260120_MDTODO/R38.1_任务描述.md)。

### R38.2 [Finished]

运行claude的按钮单独加1s的防抖，因为这个误触的代价比较大, 完成任务后将详细报告写入[R38.2](./details/20260120_MDTODO/R38.2_Task_Report.md)。

## R39 [Finished]

支持自动检测每个ITEM中提到的文档链接是否真实存在，在ITEM上有一个图标和存在的链接文档，例如0/1，2/2，根据是否多存在，图表的颜色要有变化, 完成任务后将详细报告写入[R39](./details/20260120_MDTODO/R39_任务描述.md)。

### R39.1 [Finished]

没有生效，要修复, 完成任务后将详细报告写入[R39.1](./details/20260120_MDTODO/R39.1_Task_Report.md)。

## R40 [Finished]

这个项目从bigpeper独立了出来，需要创建独立的.git和.gitignore, 完成任务后将详细报告写入[R40](./details/20260120_MDTODO/R40_Task_Report.md)。

## R41 [Finished]

每次点开链接，启动typero之前都会先弹出一下黑窗，我希望不要弹出黑窗直接启动typora
执行记录写入 [R41](./details/20260120_MDTODO/R41_Task_Report.md)。

## R42 [Finished]

点击链接后如果文件不存在，我希望能够弹出一个对话框，提示文件不存在，是否创建文件，如果点创建则创建空文件然后用typora打开, 完成任务后将详细报告写入[R42](./details/20260120_MDTODO/R42_Task_Report.md)。

## R43 [Finished]

对于 R1.11.1 这样的三级标题的Task，打开任务中的md链接失效的问题已修复。根本原因是正则表达式 `#{2,3}` 只匹配 2-3 个 `#`，无法匹配使用 `####`（4个 `#`）的任务标题。修复方案是将匹配范围扩展到 `#{2,6}`，同时改进了链接点击事件处理逻辑。

执行记录写入 [R43](./details/20260120_MDTODO/R43_Task_Report.md)。

## R44 [Finished]

过长的子任务，例如R1.14的底部会被R2遮盖，解决这个问题
执行记录写入 [R44](./details/20260120_MDTODO/R44_Task_Report.md)。

## R45 [Finished]

刷新按钮没有真正生效，解决这个问题, 完成任务后将详细报告写入[R45](./details/20260120_MDTODO/R45_Task_Report.md)。

## R46 [Finished]

在每个任务的最后一个子任务上加一个延续创建下一个子任务的按钮而不是创建子任务的子任务，这个按钮的作用和在任务级别创建子任务一样，例如R2.5按这个延续按钮会创建R2.6而不是R2.5.1，R2.4就没有这个按钮，因为R2.5已经存在，不能创建冲突的子任务, 完成任务后将详细报告写入[R46](./details/20260120_MDTODO/R46_Task_Report.md)。

## R47 [Finished]

增加低频率的定期刷新机制，防止文件变更事件遗漏，按照5s的周期低频定期刷新, 完成任务后将详细报告写入[R47](./details/20260120_MDTODO/R47_Task_Report.md)。

### R47.1 [Finished]

没有看到生效，你应该加更多的调试日志，来诊断问题, 完成任务后将详细报告写入[R47.1](./details/20260120_MDTODO/R47.1_Task_Report.md)。

### R47.2 [Finished]

又存在不生效问题，要解决这个问题，并把间隔设为1s, 完成任务后将详细报告写入[R47.2](./details/20260120_MDTODO/20260123_2347_Task_Report.md)。

## R48 [Finished]

任务级别RXX在收起后，仍然显示最近的2条子任务，这样能够收起较早的子任务的同时，还能看到最近的子任务，方便简洁地继续添加子任务。
执行记录写入 [R48](./details/20260120_MDTODO/R48_Task_Report.md)。

### R48.1 [Finished]

现在收起后显示的是最后两个，这个是正确的，为了更方便用户，我希望收起后显示最后两个的同时，可以向上滚动显示上面的子任务，也就是每个任务在收起后有自己的滚动条，可以滚动查看子任务，默认状态是滚动到最后, 完成任务后将详细报告写入[R48.1](./details/20260120_MDTODO/R48.1_Task_Report.md)。

### R48.2 [Finished]

1.默认启动时采用折叠模式
2.折叠模式下进入编辑时仍然要保持折叠模式，不要一编辑就跳回展开模式, 完成任务后将详细报告写入[R48.2](./details/20260120_MDTODO/R48.2_Task_Report.md)。

### R48.3 [Finished]

折叠模式进入编辑后确实保持折叠模式了，但是总是会滚动到子任务的最下面，导致难以编辑前面的子任务, 完成任务后将详细报告写入[R48.3](./details/20260120_MDTODO/R48.3_Task_Report.md)。

## R49 [Finished]

修改创建任务后的模板中，文件的命名方式，不再用RXX_Task_Report.md命名，而是用时间戳命名，例如20260123_1050_Task_Report.md, 完成任务后将详细报告写入[R49](./details/20260120_MDTODO/R49_Task_Report.md)。

### R49.1 [Finished]

测试发现没有生效，还是RXX的命名, 完成任务后将详细报告写入[R49.1](./details/20260120_MDTODO/R49.1_Task_Report.md)。

## R50 [Finished]

任务和子任务的几个操作按钮比如删除，claude执行等图标太大了，而且在右下角，很占空间，我希望放到上面，就是放到标题和链接状态的右边, 完成任务后将详细报告写入[R50](./details/20260120_MDTODO/20260123_1313_Task_Report.md)。

### R50.1 [Finished]

R50执行过程中出现了语法问题，先修复语法问题确保能编译，再重新执行R50，禁止用git reset等方法回退，必须手动修复当前的编译语法问题, 完成任务后将详细报告写入[R50.1](./details/20260120_MDTODO/20260123_1328_Task_Report.md)。

### R50.2 [Finished]

解决R50.1遗留问题, 完成任务后将详细报告写入[R50.2](./details/20260120_MDTODO/20260123_1350_Task_Report.md)。

### R50.3 [Finished]

延续按钮会使得折叠的任务取消折叠，这个是不应该的，应该保持折叠，和添加子任务的行为一致, 完成任务后将详细报告写入[R50.3](./details/20260120_MDTODO/20260123_1406_Task_Report.md)。

### R50.4 [Finished]

是否完成的选择框和控制任务展开还是折叠的两个按钮在最左侧，这占用了很多空间，我希望把这两个按钮放到链接状态的右侧，这样文本的最左侧就不会空出来一块，可以提高文本的空间利用率, 完成任务后将详细报告写入[R50.4](./details/20260120_MDTODO/20260123_1438_Task_Report.md)。

### R50.5 [Finished]

修改之后展开按钮失效了，要修复这个问题，另外子任务的滚动块滚动到最下面之后，最底下会被遮挡一点点，这个问题也要修复, 完成任务后将详细报告写入[R50.5](./details/20260120_MDTODO/R50.5_任务描述.md)。

